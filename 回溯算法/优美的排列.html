<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div>
        <h1>假设有从 1 到 N 的 N 个整数，如果从这 N 个数字中成功构造出一个数组，使得数组的第 i 位 (1 <= i <=N) 满足如下两个条件中的一个，我们就称这个数组为一个优美的排列</h1>
                条件
                <ol>
                    <li>第 i 位的数字能被 i 整除</li>
                    <li>i 能被第 i 位上的数字整除</li>
                </ol>
                <h1>现在给定一个整数 N，请问可以构造多少个优美的排列？</h1>

                <h1>n 是一个正整数, <= 15</h1>

    </div>
    <script>
        function countArrangement(N) {
            let res = 0
            let tmpPath = []
            let visited = []
            let nums = []
            for (let i = 0; i < N; i++) {
                nums[i] = i + 1
            }
            function backTrack(tmpPath, visited) {
                if (tmpPath.length === N) {
                    for (let i = 0, len = tmpPath.length; i < len; i++) {
                        if (tmpPath[i] % (i + 1) !== 0 && (i + 1) % tmpPath[i] !== 0) return
                    }
                    res++
                    return
                }
                for (let i = 0; i < N; i++) {
                    if (visited[i]) continue
                    visited[i] = true
                    tmpPath.push(nums[i])
                    backTrack(tmpPath, visited)
                    visited[i] = false
                    tmpPath.pop()
                }
            }
            backTrack(tmpPath, visited)
            return res

            // 没问题, 不过会超时
        }

        console.log(countArrangement(15))
    </script>
</body>

</html>